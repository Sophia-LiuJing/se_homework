# 基本数据类型

## 神秘数值

在代码中应该减少那些神秘的、奇怪的数值的使用，这主要出于对程序可读性和可改性的考虑

在可读性方面，一个数字，比如说500，比如说1000，比如说FFFF，他本身是没有任何含义的，但是如果我们可以设置一个常量将其存储起来，并给常量一个合适的名字，那么在代码中使用到这个常量的时候，它到底代表个什么意思就很容易理解了

在可改性方面，例如我在程序中设置了一个阈值，0.5，并对此进行了相关的条件语句的判断，有一天这个阈值需要被改为0.6，如果我使用的是所谓神秘数值的方法，那这个修改是很困难的，但是如果我使用了常量来存储阈值，修改就变得简单了，我只需要修改该那个常量的赋值

举两个具体语言的例子（PPT）

C语言中可以使用define来定义一个常量，Java中可以使用staticfinal来定义一个静态常量，如果需要定义一组有关联的常量，Java（JAVA8引入的，好像）和C++还提供了枚举类这一形式

## 类型转换

接下来来谈一谈类型转换，不同语言的类型转换方法各有各的特色，我这里主要以JAVA为例

Java的类型转换主要分为两种（PPT）

第一种是强制类型转换，就是直接在要转换的变量前面加一个括号，在括号中写上要转换的类型，为程序的泛用性，部分方法会舍弃对具体类型的限制，转而返回Object类型的结果，所以大家可能经常见到在前面加上一个具体类型的强制转换以方便后续使用的类似操作

第二种类型转换借助于各种工具类，或者类本身，提供的方法（包括构造方法），最典型的是几个基本类型和它们对应的包装类提供的方法

## Java的String类型

接下来书中逐一介绍了每种类型和其需要注意的地方，我这里主要谈谈对于Java中String类型的理解

打开String类的实现文件，立马就能发现String类是被final修饰的，这意味着String类是无法被继承的，同时它所有方法都是final方法

在String类中，每个字符串实质是被转换为byte类型的数组进行存储的，当然，在早期的Java版本中，这里是一个char类型的数组，现在它被改成了byte类型，因为byte类型的执行效率更高

提到执行效率，我们就进入下一个话题，就是字符串的拼接，最常见的Java字符串拼接方式应该就是使用加号进行拼接，例如（PPT）

这里存在一个问题，就如第一点所讲，String类型是final修饰的，所以String的对象实际是不可变的，理论上我们每多拼接一个hello，实际就是新创建了一个对象，然后让str这个引用指向它

但是大家注意这只是理论上，在JAVA8之后的编译器对这里其实有个优化，我们使用javap命令反编译上述代码生成的字节码文件，可以发现，这里最后实际是new了一个StringBuilder对象，然后使用其append方法进行的字符串拼接，这里又有一个问题，这个StringBuilder的对象，是每一个循环它都重新new了一个的，这实际上造出了一定的资源浪费，所以在频繁的进行字符串拼接的时候，建议直接使用StringBuilder对象，例如（PPT）
（还有StringBuffer，其实就是线程安全的StringBuilder，可以提一下）

# “无类型”的语言

## 弱类型与强类型

我这里说的所谓的“无类型”其实是一种很通俗的表达，它并不准确，我只是想用它来表达某些允许变量类型隐式转换（例如JavaScript），或者其类型可以在后续代码中动态变化（例如Python）的语言

这里的前者被称之为弱类型语言，后者被称之为动态类型语言，顾名思义，肯定还有对应的强类型语言和静态类型语言，我们先来讨论强类型和弱类型

以JavaScript和Python中相同的两个操作为例（PPT），前者允许字符串和整型相加，并返回了一个新的字符串，后者则直接报错（Python中其实允许整型和浮点型作加法，但是这和弱类型语言不同，因为Python中整型和浮点型都是Number的子类型）

观察了现象，我们接下来来作进一步分析，弱类型和强类型的本质区别是什么，两者不同的设计究竟有什么深意

这要从数据的定义开始说起，当我们定义一个数据（或者说初始化了一个变量），实际意味着

1. 开辟了一块存储空间并声明了一个变量指向这块存储空间；2）可以根据数据类型对存储空间进行特定操作（PPT）

与之对应的，对于我们定义的数据，可能有以下两个关于类型的错误

2. 访问了不该访问的空间；2）进行了不该进行的操作（PPT）

为了防止类型错误的发生，编程语言会进行类型检查，我们之前讨论编程语言的类型是什么，实际上是在讨论语言的编译器是如何进行类型检查的，或者说对于出现的关于类型的错误，编译器是如何处理的

先来下一个比较武断的定义，保证不存在与类型有关的不可捕获错误的编程语言，就是强类型语言。这里要解释一下什么叫做不可捕获错误，其实就是大家在才开始学习编程语言时经常听到的语义错误，就是编译器无法检查但是会导致程序允许出现问题的错误

例如，在某个表达式中，我想将一个字符串转为数字后和一个数字相加，但是我忘了将那个字符串转为数字，在JavaScript中，就无法检查出这一问题（单论这一行代码），但是python就会报出相关的错误，我就可以进行修改

乍一听，似乎强类型是对弱类型的进一步约束，进一步规范，正如前一个例子所说，强类型语言的这种规范带给我们更好的编程体验，大家如果对JavaScript这种典型的弱类型语言有过了解，应该也听说过JavaScript因为弱类型带来各种奇怪特性（例如[]+{}=object，{}+[]=0的sb操作)（PPT）

但是弱类型也是有它的优势所在的，或者说它的缺点其实就是它的优点，弱类型带来的对类型的各种方便操作，带来的各种奇怪特性，可以构造出各种可以说是神奇的代码，例如在string变量的前面加个+号，就可以将其转换为number类型（PPT）

JavaScript还有很多巧妙的用法，我这里就不过多赘述了。与此同时，弱类型语言也限制了JavaScript的使用，任何一个合格的Java程序员都可以写出上千行结构清晰的Java代码，而JavaScript程序员则很难做到这一点

## 动态类型和静态类型

前面还提到了静态类型和动态类型的语言，受限于时间，我这里就这里就这简单分享一下它们各自的外在表现

顾名思义，静态类型就是某个变量在指定其类型后，不可以随便更改其类型，动态类型就是变量的类型可以动态变化













